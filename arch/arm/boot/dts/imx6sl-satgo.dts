// SPDX-License-Identifier: (GPL-2.0+ OR MIT)

/dts-v1/;

#include <dt-bindings/gpio/gpio.h>
#include "imx6sl.dtsi"

/ {
	model = "Elgin i.MX6 SoloLite SatGo Board";
	compatible = "elgin,imx6sl-satgo", "fsl,imx6sl";

	aliases {
		mmc0 = &usdhc2;
		usb0 = &usbotg1;
	};

	chosen {
		stdout-path = &uart1;
	};

	watchdog {
		compatible = "linux,wdt-gpio";
		gpios = <&gpio1 13 GPIO_ACTIVE_HIGH>;
		hw_algo = "level";
		hw_margin_ms = <1000>;
		always-running;
	};
};

&cpu0 {
	cpu-supply = <&sw1_reg>;
};

&ecspi2 {
	cs-gpios = <&gpio4 15 GPIO_ACTIVE_LOW>;
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_ecspi2>;
	status = "okay";
};

&i2c1 {
	clock-frequency = <100000>;
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_i2c1>;
	status = "okay";

	pmic@8 {
		compatible = "fsl,pfuze3001";
		reg = <0x08>;

		regulators {
			sw1_reg: sw1 {
				regulator-min-microvolt = <1300000>;
				regulator-max-microvolt = <1500000>;
				regulator-boot-on;
				regulator-always-on;
			};

			sw2_reg: sw2 {
				regulator-min-microvolt = <1500000>;
				regulator-max-microvolt = <1850000>;
				regulator-boot-on;
				regulator-always-on;
			};

			sw3_reg: sw3 {
				regulator-min-microvolt = <900000>;
				regulator-max-microvolt = <1650000>;
				regulator-boot-on;
				regulator-always-on;
			};

			snvs_reg: vsnvs {
				regulator-min-microvolt = <1000000>;
				regulator-max-microvolt = <3000000>;
				regulator-boot-on;
				regulator-always-on;
			};

			vgen1_reg: vldo1 {
				regulator-min-microvolt = <1800000>;
				regulator-max-microvolt = <3300000>;
				regulator-always-on;
			};

			vgen2_reg: vldo2 {
				regulator-min-microvolt = <1400000>;
				regulator-max-microvolt = <1500000>;
				regulator-always-on;
			};

			vgen3_reg: vccsd {
				regulator-min-microvolt = <2850000>;
				regulator-max-microvolt = <3300000>;
				regulator-always-on;
			};

			vgen4_reg: v33 {
				regulator-min-microvolt = <2850000>;
				regulator-max-microvolt = <3300000>;
				regulator-always-on;
			};

			vgen5_reg: vldo3 {
				regulator-min-microvolt = <3000000>;
				regulator-max-microvolt = <3000000>;
				regulator-always-on;
			};

			vgen6_reg: vldo4 {
				regulator-min-microvolt = <1800000>;
				regulator-max-microvolt = <3300000>;
				regulator-always-on;
			};
		};
	};
};

&fec {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_fec>;
	phy-mode = "rmii";
	phy-handle = <&ethphy0>;
	status = "okay";

	mdio {
		#address-cells = <1>;
		#size-cells = <0>;

		ethphy0: ethernet-phy@2 {
			reg = <2>;
		};
	};
};

&pwm4 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_pwm4>;
	status = "okay";
};

&uart1 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_uart1>;
	status = "okay";
};

&uart2 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_uart2>;
	status = "okay";
};

&uart3 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_uart3>;
	status = "okay";
};

&usbotg1 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_usbotg1>;
	disable-over-current;
	dr_mode = "peripheral";
	status = "okay";
};

&usdhc2 {
	pinctrl-names = "default", "state_100mhz", "state_200mhz";
	pinctrl-0 = <&pinctrl_usdhc2>;
	pinctrl-1 = <&pinctrl_usdhc2_100mhz>;
	pinctrl-2 = <&pinctrl_usdhc2_200mhz>;
	bus-width = <8>;
	non-removable;
	status = "okay";
};

&iomuxc {
	pinctrl_uart1: uart1grp {
		fsl,pins = <
			MX6SL_PAD_UART1_RXD__UART1_RX_DATA	0x1b0b1
			MX6SL_PAD_UART1_TXD__UART1_TX_DATA	0x1b0b1
		>;
	};

	pinctrl_uart2: uart2grp {
		fsl,pins = <
			MX6SL_PAD_EPDC_D13__UART2_TX_DATA	0x1b0b1
			MX6SL_PAD_EPDC_D12__UART2_RX_DATA   	0x1b0b1
		>;
	};

	pinctrl_uart3: uart3grp {
		fsl,pins = <
			MX6SL_PAD_EPDC_VCOM1__UART3_TX_DATA	0x1b0b1
			MX6SL_PAD_EPDC_VCOM0__UART3_RX_DATA	0x1b0b1
		>;
	};

	pinctrl_usbotg1: usbotg1grp {
		fsl,pins = <
			MX6SL_PAD_EPDC_PWRCOM__USB_OTG1_ID	0x17059
		>;
	};

	pinctrl_ecspi2: ecspi2grp {
		fsl,pins = <
			MX6SL_PAD_ECSPI2_MOSI__ECSPI2_MOSI	0x100b1
			MX6SL_PAD_ECSPI2_SCLK__ECSPI2_SCLK	0x100b1
			MX6SL_PAD_ECSPI2_SS0__GPIO4_IO15	0x110b0
		>;
	};

	pinctrl_i2c1: i2c1grp {
		fsl,pins = <
			MX6SL_PAD_I2C1_SCL__I2C1_SCL		0x4001b8b1
			MX6SL_PAD_I2C1_SDA__I2C1_SDA		0x4001b8b1
		>;
	};

	pinctrl_fec: fecgrp {
		fsl,pins = <
			MX6SL_PAD_FEC_MDC__FEC_MDC		0x1b0b0
			MX6SL_PAD_FEC_MDIO__FEC_MDIO		0x1b0b0
			MX6SL_PAD_FEC_CRS_DV__FEC_RX_DV	0x1b0b0
			MX6SL_PAD_FEC_RXD0__FEC_RX_DATA0	0x1b0b0
			MX6SL_PAD_FEC_RXD1__FEC_RX_DATA1	0x1b0b0
			MX6SL_PAD_FEC_TX_EN__FEC_TX_EN	0x1b0b0
			MX6SL_PAD_FEC_TXD0__FEC_TX_DATA0	0x1b0b0
			MX6SL_PAD_FEC_TXD1__FEC_TX_DATA1	0x1b0b0
			MX6SL_PAD_FEC_REF_CLK__FEC_REF_OUT	0x4001b0a8
		>;
	};

	pinctrl_pwm4: pwm4grp {
		fsl,pins = <
			MX6SL_PAD_EPDC_GDSP__PWM4_OUT		0x1b0b1
		>;
	};

	pinctrl_usdhc2: usdhc2grp {
		fsl,pins = <
			MX6SL_PAD_SD2_CMD__SD2_CMD		0x17059
			MX6SL_PAD_SD2_CLK__SD2_CLK		0x10059
			MX6SL_PAD_SD2_DAT0__SD2_DATA0		0x17059
			MX6SL_PAD_SD2_DAT1__SD2_DATA1		0x17059
			MX6SL_PAD_SD2_DAT2__SD2_DATA2		0x17059
			MX6SL_PAD_SD2_DAT3__SD2_DATA3		0x17059
			MX6SL_PAD_SD2_DAT4__SD2_DATA4		0x17059
			MX6SL_PAD_SD2_DAT5__SD2_DATA5		0x17059
			MX6SL_PAD_SD2_DAT6__SD2_DATA6		0x17059
			MX6SL_PAD_SD2_DAT7__SD2_DATA7		0x17059
			MX6SL_PAD_SD2_RST__SD2_RESET		0x17059
		>;
	};

	pinctrl_usdhc2_100mhz: usdhc2grp100mhz {
		fsl,pins = <
			MX6SL_PAD_SD2_CMD__SD2_CMD		0x170b9
			MX6SL_PAD_SD2_CLK__SD2_CLK		0x100b9
			MX6SL_PAD_SD2_DAT0__SD2_DATA0		0x170b9
			MX6SL_PAD_SD2_DAT1__SD2_DATA1		0x170b9
			MX6SL_PAD_SD2_DAT2__SD2_DATA2		0x170b9
			MX6SL_PAD_SD2_DAT3__SD2_DATA3		0x170b9
			MX6SL_PAD_SD2_DAT4__SD2_DATA4		0x170b9
			MX6SL_PAD_SD2_DAT5__SD2_DATA5		0x170b9
			MX6SL_PAD_SD2_DAT6__SD2_DATA6		0x170b9
			MX6SL_PAD_SD2_DAT7__SD2_DATA7		0x170b9
			MX6SL_PAD_SD2_RST__SD2_RESET		0x170b9
		>;
	};

	pinctrl_usdhc2_200mhz: usdhc2grp200mhz {
		fsl,pins = <
			MX6SL_PAD_SD2_CMD__SD2_CMD		0x170f9
			MX6SL_PAD_SD2_CLK__SD2_CLK		0x100f9
			MX6SL_PAD_SD2_DAT0__SD2_DATA0		0x170f9
			MX6SL_PAD_SD2_DAT1__SD2_DATA1		0x170f9
			MX6SL_PAD_SD2_DAT2__SD2_DATA2		0x170f9
			MX6SL_PAD_SD2_DAT3__SD2_DATA3		0x170f9
			MX6SL_PAD_SD2_DAT4__SD2_DATA4		0x170f9
			MX6SL_PAD_SD2_DAT5__SD2_DATA5		0x170f9
			MX6SL_PAD_SD2_DAT6__SD2_DATA6		0x170f9
			MX6SL_PAD_SD2_DAT7__SD2_DATA7		0x170f9
			MX6SL_PAD_SD2_RST__SD2_RESET		0x170f9
		>;
	};
};
